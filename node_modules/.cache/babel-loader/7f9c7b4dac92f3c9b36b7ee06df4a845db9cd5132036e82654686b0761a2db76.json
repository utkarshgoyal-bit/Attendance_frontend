{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\admin\\\\Desktop\\\\Maitrii Infotech\\\\testing\\\\Attendance\\\\Attendance_frontend\\\\src\\\\context\\\\AuthContext.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { createContext, useContext, useState, useEffect, useCallback } from 'react';\nimport api from '../api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext(null);\nexport const useAuth = () => {\n  _s();\n  return useContext(AuthContext);\n};\n_s(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport const AuthProvider = ({\n  children\n}) => {\n  _s2();\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const checkAuth = useCallback(async () => {\n    try {\n      const token = localStorage.getItem('token');\n      if (!token) {\n        setLoading(false);\n        return;\n      }\n      const res = await api.get('/auth/me');\n      setUser(res.data);\n    } catch {\n      localStorage.removeItem('token');\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n  useEffect(() => {\n    checkAuth();\n  }, [checkAuth]);\n  const login = async (email, password, remember = false) => {\n    const res = await api.post('/auth/login', {\n      email,\n      password,\n      remember\n    });\n    localStorage.setItem('token', res.data.token);\n    setUser(res.data.user);\n    return res.data;\n  };\n  const logout = async () => {\n    try {\n      await api.post('/auth/logout');\n    } catch {}\n    localStorage.removeItem('token');\n    setUser(null);\n  };\n  const changePassword = async (currentPassword, newPassword) => {\n    const res = await api.post('/auth/change-password', {\n      currentPassword,\n      newPassword\n    });\n    localStorage.setItem('token', res.data.token);\n    setUser(prev => ({\n      ...prev,\n      isFirstLogin: false\n    }));\n    return res.data;\n  };\n  const setSecurityQuestions = async questions => {\n    await api.post('/auth/security-questions', {\n      questions\n    });\n    setUser(prev => ({\n      ...prev,\n      isFirstLogin: false,\n      hasSecurityQuestions: true\n    }));\n  };\n  const value = {\n    user,\n    loading,\n    login,\n    logout,\n    changePassword,\n    setSecurityQuestions,\n    checkAuth\n  };\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 10\n  }, this);\n};\n_s2(AuthProvider, \"BttoceN+EwCpc7gKgbMYkdwK578=\");\n_c = AuthProvider;\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["createContext","useContext","useState","useEffect","useCallback","api","jsxDEV","_jsxDEV","AuthContext","useAuth","_s","AuthProvider","children","_s2","user","setUser","loading","setLoading","checkAuth","token","localStorage","getItem","res","get","data","removeItem","login","email","password","remember","post","setItem","logout","changePassword","currentPassword","newPassword","prev","isFirstLogin","setSecurityQuestions","questions","hasSecurityQuestions","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/admin/Desktop/Maitrii Infotech/testing/Attendance/Attendance_frontend/src/context/AuthContext.jsx"],"sourcesContent":["import { createContext, useContext, useState, useEffect, useCallback } from 'react';\nimport api from '../api';\n\nconst AuthContext = createContext(null);\n\nexport const useAuth = () => useContext(AuthContext);\n\nexport const AuthProvider = ({ children }) => {\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  const checkAuth = useCallback(async () => {\n    try {\n      const token = localStorage.getItem('token');\n      if (!token) { setLoading(false); return; }\n      \n      const res = await api.get('/auth/me');\n      setUser(res.data);\n    } catch {\n      localStorage.removeItem('token');\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  useEffect(() => { checkAuth(); }, [checkAuth]);\n\n  const login = async (email, password, remember = false) => {\n    const res = await api.post('/auth/login', { email, password, remember });\n    localStorage.setItem('token', res.data.token);\n    setUser(res.data.user);\n    return res.data;\n  };\n\n  const logout = async () => {\n    try { await api.post('/auth/logout'); } catch {}\n    localStorage.removeItem('token');\n    setUser(null);\n  };\n\n  const changePassword = async (currentPassword, newPassword) => {\n    const res = await api.post('/auth/change-password', { currentPassword, newPassword });\n    localStorage.setItem('token', res.data.token);\n    setUser(prev => ({ ...prev, isFirstLogin: false }));\n    return res.data;\n  };\n\n  const setSecurityQuestions = async (questions) => {\n    await api.post('/auth/security-questions', { questions });\n    setUser(prev => ({ ...prev, isFirstLogin: false, hasSecurityQuestions: true }));\n  };\n\n  const value = { user, loading, login, logout, changePassword, setSecurityQuestions, checkAuth };\n  \n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}