{"ast":null,"code":"import axios from 'axios';\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\nconst apiClient = axios.create({\n  baseURL: API_URL,\n  timeout: 10000,\n  headers: {\n    'Content-Type': 'application/json'\n  },\n  withCredentials: true\n});\n\n// Request interceptor - add auth token\napiClient.interceptors.request.use(config => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n\n  // Fallback headers for testing\n  const user = JSON.parse(localStorage.getItem('user') || '{}');\n  if (user.role) {\n    config.headers['x-user-role'] = user.role;\n    config.headers['x-user-id'] = user.id;\n    config.headers['x-employee-id'] = user.employeeId || user.id;\n  }\n  return config;\n});\n\n// Response interceptor - handle errors\napiClient.interceptors.response.use(response => response, error => {\n  var _error$response;\n  if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 401) {\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n    window.location.href = '/login';\n  }\n  return Promise.reject(error);\n});\n\n// API endpoints\nexport const api = {\n  // Auth\n  login: data => apiClient.post('/auth/login', data),\n  logout: () => apiClient.post('/auth/logout'),\n  getMe: () => apiClient.get('/auth/me'),\n  // Employees\n  getEmployees: params => apiClient.get('/employees', {\n    params\n  }),\n  getEmployee: id => apiClient.get(`/employees/${id}`),\n  createEmployee: data => apiClient.post('/employees', data),\n  updateEmployee: (id, data) => apiClient.put(`/employees/${id}`, data),\n  deleteEmployee: id => apiClient.delete(`/employees/${id}`),\n  getEmployeeStats: () => apiClient.get('/employees/stats'),\n  // Attendance\n  getActiveQR: params => apiClient.get('/attendance/qr/active', {\n    params\n  }),\n  checkIn: data => apiClient.post('/attendance/checkin', data),\n  getTodayAttendance: params => apiClient.get('/attendance/today', {\n    params\n  }),\n  approveAttendance: id => apiClient.put(`/attendance/approve/${id}`),\n  rejectAttendance: (id, data) => apiClient.put(`/attendance/reject/${id}`, data),\n  bulkApproveAttendance: data => apiClient.post('/attendance/bulk-approve', data),\n  getMonthlyAttendance: params => apiClient.get('/attendance/monthly', {\n    params\n  }),\n  // Leaves\n  applyLeave: data => apiClient.post('/leaves/apply', data),\n  getLeaves: params => apiClient.get('/leaves', {\n    params\n  }),\n  getLeaveBalance: employeeId => apiClient.get(`/leaves/balance/${employeeId}`),\n  approveLeave: id => apiClient.put(`/leaves/approve/${id}`),\n  rejectLeave: (id, data) => apiClient.put(`/leaves/reject/${id}`, data),\n  // Salaries\n  calculateSalary: data => apiClient.post('/salaries/calculate', data),\n  saveSalary: data => apiClient.post('/salaries/save', data),\n  getSalaries: params => apiClient.get('/salaries', {\n    params\n  }),\n  approveSalary: id => apiClient.put(`/salaries/approve/${id}`),\n  bulkCalculateSalaries: data => apiClient.post('/salaries/bulk-calculate', data),\n  getSalaryConfig: params => apiClient.get('/salaries/config', {\n    params\n  }),\n  updateSalaryConfig: data => apiClient.put('/salaries/config', data),\n  getSalaryComponents: params => apiClient.get('/salaries/components', {\n    params\n  }),\n  // Config\n  getConfig: orgId => apiClient.get(`/config/${orgId}`),\n  updateConfig: (orgId, data) => apiClient.put(`/config/${orgId}`, data),\n  // Branches\n  getBranches: params => apiClient.get('/branches', {\n    params\n  }),\n  createBranch: data => apiClient.post('/branches', data),\n  updateBranch: (id, data) => apiClient.put(`/branches/${id}`, data),\n  // Organizations\n  getOrganizations: () => apiClient.get('/organizations'),\n  getOrganization: id => apiClient.get(`/organizations/${id}`),\n  createOrganization: data => apiClient.post('/organizations', data),\n  updateOrganization: (id, data) => apiClient.put(`/organizations/${id}`, data)\n};\nexport default apiClient;","map":{"version":3,"names":["axios","API_URL","process","env","REACT_APP_API_URL","apiClient","create","baseURL","timeout","headers","withCredentials","interceptors","request","use","config","token","localStorage","getItem","Authorization","user","JSON","parse","role","id","employeeId","response","error","_error$response","status","removeItem","window","location","href","Promise","reject","api","login","data","post","logout","getMe","get","getEmployees","params","getEmployee","createEmployee","updateEmployee","put","deleteEmployee","delete","getEmployeeStats","getActiveQR","checkIn","getTodayAttendance","approveAttendance","rejectAttendance","bulkApproveAttendance","getMonthlyAttendance","applyLeave","getLeaves","getLeaveBalance","approveLeave","rejectLeave","calculateSalary","saveSalary","getSalaries","approveSalary","bulkCalculateSalaries","getSalaryConfig","updateSalaryConfig","getSalaryComponents","getConfig","orgId","updateConfig","getBranches","createBranch","updateBranch","getOrganizations","getOrganization","createOrganization","updateOrganization"],"sources":["C:/Users/admin/Downloads/hr-frontend-optimized/hr-frontend-optimized/src/services/api.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\n\nconst apiClient = axios.create({\n  baseURL: API_URL,\n  timeout: 10000,\n  headers: { 'Content-Type': 'application/json' },\n  withCredentials: true\n});\n\n// Request interceptor - add auth token\napiClient.interceptors.request.use((config) => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  \n  // Fallback headers for testing\n  const user = JSON.parse(localStorage.getItem('user') || '{}');\n  if (user.role) {\n    config.headers['x-user-role'] = user.role;\n    config.headers['x-user-id'] = user.id;\n    config.headers['x-employee-id'] = user.employeeId || user.id;\n  }\n  \n  return config;\n});\n\n// Response interceptor - handle errors\napiClient.interceptors.response.use(\n  (response) => response,\n  (error) => {\n    if (error.response?.status === 401) {\n      localStorage.removeItem('token');\n      localStorage.removeItem('user');\n      window.location.href = '/login';\n    }\n    return Promise.reject(error);\n  }\n);\n\n// API endpoints\nexport const api = {\n  // Auth\n  login: (data) => apiClient.post('/auth/login', data),\n  logout: () => apiClient.post('/auth/logout'),\n  getMe: () => apiClient.get('/auth/me'),\n  \n  // Employees\n  getEmployees: (params) => apiClient.get('/employees', { params }),\n  getEmployee: (id) => apiClient.get(`/employees/${id}`),\n  createEmployee: (data) => apiClient.post('/employees', data),\n  updateEmployee: (id, data) => apiClient.put(`/employees/${id}`, data),\n  deleteEmployee: (id) => apiClient.delete(`/employees/${id}`),\n  getEmployeeStats: () => apiClient.get('/employees/stats'),\n  \n  // Attendance\n  getActiveQR: (params) => apiClient.get('/attendance/qr/active', { params }),\n  checkIn: (data) => apiClient.post('/attendance/checkin', data),\n  getTodayAttendance: (params) => apiClient.get('/attendance/today', { params }),\n  approveAttendance: (id) => apiClient.put(`/attendance/approve/${id}`),\n  rejectAttendance: (id, data) => apiClient.put(`/attendance/reject/${id}`, data),\n  bulkApproveAttendance: (data) => apiClient.post('/attendance/bulk-approve', data),\n  getMonthlyAttendance: (params) => apiClient.get('/attendance/monthly', { params }),\n  \n  // Leaves\n  applyLeave: (data) => apiClient.post('/leaves/apply', data),\n  getLeaves: (params) => apiClient.get('/leaves', { params }),\n  getLeaveBalance: (employeeId) => apiClient.get(`/leaves/balance/${employeeId}`),\n  approveLeave: (id) => apiClient.put(`/leaves/approve/${id}`),\n  rejectLeave: (id, data) => apiClient.put(`/leaves/reject/${id}`, data),\n  \n  // Salaries\n  calculateSalary: (data) => apiClient.post('/salaries/calculate', data),\n  saveSalary: (data) => apiClient.post('/salaries/save', data),\n  getSalaries: (params) => apiClient.get('/salaries', { params }),\n  approveSalary: (id) => apiClient.put(`/salaries/approve/${id}`),\n  bulkCalculateSalaries: (data) => apiClient.post('/salaries/bulk-calculate', data),\n  getSalaryConfig: (params) => apiClient.get('/salaries/config', { params }),\n  updateSalaryConfig: (data) => apiClient.put('/salaries/config', data),\n  getSalaryComponents: (params) => apiClient.get('/salaries/components', { params }),\n  \n  // Config\n  getConfig: (orgId) => apiClient.get(`/config/${orgId}`),\n  updateConfig: (orgId, data) => apiClient.put(`/config/${orgId}`, data),\n  \n  // Branches\n  getBranches: (params) => apiClient.get('/branches', { params }),\n  createBranch: (data) => apiClient.post('/branches', data),\n  updateBranch: (id, data) => apiClient.put(`/branches/${id}`, data),\n  \n  // Organizations\n  getOrganizations: () => apiClient.get('/organizations'),\n  getOrganization: (id) => apiClient.get(`/organizations/${id}`),\n  createOrganization: (data) => apiClient.post('/organizations', data),\n  updateOrganization: (id, data) => apiClient.put(`/organizations/${id}`, data)\n};\n\nexport default apiClient;\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,OAAO,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,IAAI,2BAA2B;AAE5E,MAAMC,SAAS,GAAGL,KAAK,CAACM,MAAM,CAAC;EAC7BC,OAAO,EAAEN,OAAO;EAChBO,OAAO,EAAE,KAAK;EACdC,OAAO,EAAE;IAAE,cAAc,EAAE;EAAmB,CAAC;EAC/CC,eAAe,EAAE;AACnB,CAAC,CAAC;;AAEF;AACAL,SAAS,CAACM,YAAY,CAACC,OAAO,CAACC,GAAG,CAAEC,MAAM,IAAK;EAC7C,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC3C,IAAIF,KAAK,EAAE;IACTD,MAAM,CAACL,OAAO,CAACS,aAAa,GAAG,UAAUH,KAAK,EAAE;EAClD;;EAEA;EACA,MAAMI,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACL,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,IAAI,IAAI,CAAC;EAC7D,IAAIE,IAAI,CAACG,IAAI,EAAE;IACbR,MAAM,CAACL,OAAO,CAAC,aAAa,CAAC,GAAGU,IAAI,CAACG,IAAI;IACzCR,MAAM,CAACL,OAAO,CAAC,WAAW,CAAC,GAAGU,IAAI,CAACI,EAAE;IACrCT,MAAM,CAACL,OAAO,CAAC,eAAe,CAAC,GAAGU,IAAI,CAACK,UAAU,IAAIL,IAAI,CAACI,EAAE;EAC9D;EAEA,OAAOT,MAAM;AACf,CAAC,CAAC;;AAEF;AACAT,SAAS,CAACM,YAAY,CAACc,QAAQ,CAACZ,GAAG,CAChCY,QAAQ,IAAKA,QAAQ,EACrBC,KAAK,IAAK;EAAA,IAAAC,eAAA;EACT,IAAI,EAAAA,eAAA,GAAAD,KAAK,CAACD,QAAQ,cAAAE,eAAA,uBAAdA,eAAA,CAAgBC,MAAM,MAAK,GAAG,EAAE;IAClCZ,YAAY,CAACa,UAAU,CAAC,OAAO,CAAC;IAChCb,YAAY,CAACa,UAAU,CAAC,MAAM,CAAC;IAC/BC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,QAAQ;EACjC;EACA,OAAOC,OAAO,CAACC,MAAM,CAACR,KAAK,CAAC;AAC9B,CACF,CAAC;;AAED;AACA,OAAO,MAAMS,GAAG,GAAG;EACjB;EACAC,KAAK,EAAGC,IAAI,IAAKhC,SAAS,CAACiC,IAAI,CAAC,aAAa,EAAED,IAAI,CAAC;EACpDE,MAAM,EAAEA,CAAA,KAAMlC,SAAS,CAACiC,IAAI,CAAC,cAAc,CAAC;EAC5CE,KAAK,EAAEA,CAAA,KAAMnC,SAAS,CAACoC,GAAG,CAAC,UAAU,CAAC;EAEtC;EACAC,YAAY,EAAGC,MAAM,IAAKtC,SAAS,CAACoC,GAAG,CAAC,YAAY,EAAE;IAAEE;EAAO,CAAC,CAAC;EACjEC,WAAW,EAAGrB,EAAE,IAAKlB,SAAS,CAACoC,GAAG,CAAC,cAAclB,EAAE,EAAE,CAAC;EACtDsB,cAAc,EAAGR,IAAI,IAAKhC,SAAS,CAACiC,IAAI,CAAC,YAAY,EAAED,IAAI,CAAC;EAC5DS,cAAc,EAAEA,CAACvB,EAAE,EAAEc,IAAI,KAAKhC,SAAS,CAAC0C,GAAG,CAAC,cAAcxB,EAAE,EAAE,EAAEc,IAAI,CAAC;EACrEW,cAAc,EAAGzB,EAAE,IAAKlB,SAAS,CAAC4C,MAAM,CAAC,cAAc1B,EAAE,EAAE,CAAC;EAC5D2B,gBAAgB,EAAEA,CAAA,KAAM7C,SAAS,CAACoC,GAAG,CAAC,kBAAkB,CAAC;EAEzD;EACAU,WAAW,EAAGR,MAAM,IAAKtC,SAAS,CAACoC,GAAG,CAAC,uBAAuB,EAAE;IAAEE;EAAO,CAAC,CAAC;EAC3ES,OAAO,EAAGf,IAAI,IAAKhC,SAAS,CAACiC,IAAI,CAAC,qBAAqB,EAAED,IAAI,CAAC;EAC9DgB,kBAAkB,EAAGV,MAAM,IAAKtC,SAAS,CAACoC,GAAG,CAAC,mBAAmB,EAAE;IAAEE;EAAO,CAAC,CAAC;EAC9EW,iBAAiB,EAAG/B,EAAE,IAAKlB,SAAS,CAAC0C,GAAG,CAAC,uBAAuBxB,EAAE,EAAE,CAAC;EACrEgC,gBAAgB,EAAEA,CAAChC,EAAE,EAAEc,IAAI,KAAKhC,SAAS,CAAC0C,GAAG,CAAC,sBAAsBxB,EAAE,EAAE,EAAEc,IAAI,CAAC;EAC/EmB,qBAAqB,EAAGnB,IAAI,IAAKhC,SAAS,CAACiC,IAAI,CAAC,0BAA0B,EAAED,IAAI,CAAC;EACjFoB,oBAAoB,EAAGd,MAAM,IAAKtC,SAAS,CAACoC,GAAG,CAAC,qBAAqB,EAAE;IAAEE;EAAO,CAAC,CAAC;EAElF;EACAe,UAAU,EAAGrB,IAAI,IAAKhC,SAAS,CAACiC,IAAI,CAAC,eAAe,EAAED,IAAI,CAAC;EAC3DsB,SAAS,EAAGhB,MAAM,IAAKtC,SAAS,CAACoC,GAAG,CAAC,SAAS,EAAE;IAAEE;EAAO,CAAC,CAAC;EAC3DiB,eAAe,EAAGpC,UAAU,IAAKnB,SAAS,CAACoC,GAAG,CAAC,mBAAmBjB,UAAU,EAAE,CAAC;EAC/EqC,YAAY,EAAGtC,EAAE,IAAKlB,SAAS,CAAC0C,GAAG,CAAC,mBAAmBxB,EAAE,EAAE,CAAC;EAC5DuC,WAAW,EAAEA,CAACvC,EAAE,EAAEc,IAAI,KAAKhC,SAAS,CAAC0C,GAAG,CAAC,kBAAkBxB,EAAE,EAAE,EAAEc,IAAI,CAAC;EAEtE;EACA0B,eAAe,EAAG1B,IAAI,IAAKhC,SAAS,CAACiC,IAAI,CAAC,qBAAqB,EAAED,IAAI,CAAC;EACtE2B,UAAU,EAAG3B,IAAI,IAAKhC,SAAS,CAACiC,IAAI,CAAC,gBAAgB,EAAED,IAAI,CAAC;EAC5D4B,WAAW,EAAGtB,MAAM,IAAKtC,SAAS,CAACoC,GAAG,CAAC,WAAW,EAAE;IAAEE;EAAO,CAAC,CAAC;EAC/DuB,aAAa,EAAG3C,EAAE,IAAKlB,SAAS,CAAC0C,GAAG,CAAC,qBAAqBxB,EAAE,EAAE,CAAC;EAC/D4C,qBAAqB,EAAG9B,IAAI,IAAKhC,SAAS,CAACiC,IAAI,CAAC,0BAA0B,EAAED,IAAI,CAAC;EACjF+B,eAAe,EAAGzB,MAAM,IAAKtC,SAAS,CAACoC,GAAG,CAAC,kBAAkB,EAAE;IAAEE;EAAO,CAAC,CAAC;EAC1E0B,kBAAkB,EAAGhC,IAAI,IAAKhC,SAAS,CAAC0C,GAAG,CAAC,kBAAkB,EAAEV,IAAI,CAAC;EACrEiC,mBAAmB,EAAG3B,MAAM,IAAKtC,SAAS,CAACoC,GAAG,CAAC,sBAAsB,EAAE;IAAEE;EAAO,CAAC,CAAC;EAElF;EACA4B,SAAS,EAAGC,KAAK,IAAKnE,SAAS,CAACoC,GAAG,CAAC,WAAW+B,KAAK,EAAE,CAAC;EACvDC,YAAY,EAAEA,CAACD,KAAK,EAAEnC,IAAI,KAAKhC,SAAS,CAAC0C,GAAG,CAAC,WAAWyB,KAAK,EAAE,EAAEnC,IAAI,CAAC;EAEtE;EACAqC,WAAW,EAAG/B,MAAM,IAAKtC,SAAS,CAACoC,GAAG,CAAC,WAAW,EAAE;IAAEE;EAAO,CAAC,CAAC;EAC/DgC,YAAY,EAAGtC,IAAI,IAAKhC,SAAS,CAACiC,IAAI,CAAC,WAAW,EAAED,IAAI,CAAC;EACzDuC,YAAY,EAAEA,CAACrD,EAAE,EAAEc,IAAI,KAAKhC,SAAS,CAAC0C,GAAG,CAAC,aAAaxB,EAAE,EAAE,EAAEc,IAAI,CAAC;EAElE;EACAwC,gBAAgB,EAAEA,CAAA,KAAMxE,SAAS,CAACoC,GAAG,CAAC,gBAAgB,CAAC;EACvDqC,eAAe,EAAGvD,EAAE,IAAKlB,SAAS,CAACoC,GAAG,CAAC,kBAAkBlB,EAAE,EAAE,CAAC;EAC9DwD,kBAAkB,EAAG1C,IAAI,IAAKhC,SAAS,CAACiC,IAAI,CAAC,gBAAgB,EAAED,IAAI,CAAC;EACpE2C,kBAAkB,EAAEA,CAACzD,EAAE,EAAEc,IAAI,KAAKhC,SAAS,CAAC0C,GAAG,CAAC,kBAAkBxB,EAAE,EAAE,EAAEc,IAAI;AAC9E,CAAC;AAED,eAAehC,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}